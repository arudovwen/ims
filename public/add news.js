(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"4bQI":function(e,t,a){var o=a("iWqz");"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(o,r);o.locals&&(e.exports=o.locals)},"9khb":function(e,t,a){"use strict";a.r(t);var o={data:function(){return{type:this.$route.params.type,project:{name:"",cover_mage:"",about:""},placeholder:"/images/placeholder.png",filesSelectedLength:null,progress:null,uploadedFileUrl:"",cloudinary:{uploadPreset:"knkccgjv",apiKey:"634813511968181",cloudName:"bizguruh-com"}}},components:{"app-editor":a("ynI1").a},mounted:function(){},methods:{submit:function(){var e=this;axios.post("/api/create-project",this.project).then((function(t){201==t.status&&(e.$toasted.info("Created successfully"),e.project={name:"",cover_mage:"",about:""})}))},handleFileChange:function(e){var t=e.target.files[0];this.loadCoverFile(t)},loadCoverFile:function(e){var t=this,a=new FileReader;a.onload=function(e){t.placeholder=e.target.result},a.readAsDataURL(e),this.processUpload(e)},processUpload:function(e){var t=this,a=this;this.start=!0;var o=new FormData,r=new XMLHttpRequest,s=this.cloudinary.cloudName,i=this.cloudinary.uploadPreset;o.append("file",e),o.append("resource_type","auto"),o.append("upload_preset",i),r.open("POST","https://api.cloudinary.com/v1_1/"+s+"/upload"),r.upload.onprogress=function(e){e.lengthComputable&&(a.progress=Math.round(e.loaded/e.total*100)+"%")},r.upload.onloadstart=function(e){this.progress="Starting..."},r.upload.onloadend=function(e){this.progress="Completing.."},r.onload=function(e){if(200===r.status){t.progress="Completed",setTimeout((function(){t.start=!1}),1e3);var a=JSON.parse(r.response);t.uploadedFileUrl=a.secure_url,t.project.cover_image=a.secure_url}else t.start=!1,alert("Upload failed. Please try again.")},r.send(o)},upload_handler:function(e,t,a){var o,r;(o=new XMLHttpRequest).withCredentials=!1,o.open("POST","/api/image-upload"),o.onload=function(){var e;200==o.status?(e=JSON.parse(o.responseText))&&"string"==typeof e.location?t(e.location):a("Invalid JSON: "+o.responseText):a("HTTP Error: "+o.status)},(r=new FormData).append("file",e.blob()),o.send(r)},loadFile:function(e,t,a){var o=document.createElement("input");o.setAttribute("type","file"),o.setAttribute("accept","image/*"),o.onchange=function(){var t=this.files[0],a=new FileReader;a.readAsDataURL(t),a.onload=function(){var o="blobid"+(new Date).getTime(),r=tinymce.activeEditor.editorUpload.blobCache,s=a.result.split(",")[1],i=r.create(o,t,s);r.add(i),e(i.blobUri(),{title:t.name})}},o.click()}}},r=(a("PFQc"),a("KHd+")),s=Object(r.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"form"}},[a("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[a("legend",[e._v("Create new "+e._s(e.type))]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[e._v("Project name")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.project.name,expression:"project.name"}],staticClass:"form-control",attrs:{type:"text",name:"title",id:"title","aria-describedby":"helpId",placeholder:"Enter title"},domProps:{value:e.project.name},on:{input:function(t){t.target.composing||e.$set(e.project,"name",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[e._v("About")]),e._v(" "),a("app-editor",{staticClass:"form-control",attrs:{apiKey:"a0iyq87xxk4jqc1rf2kj55kr8pu9pol61qt32jccfldibgd7",init:{selector:"textarea",toolbar_mode:"floating",plugins:"advlist autolink lists link image imagetools charmap print preview anchor insertdatetime media table paste code help wordcount a11ychecker advcode  formatpainter linkchecker autolink lists media mediaembed   table  tinymcespellchecker",toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat |image help | a11ycheck addcomment showcomments casechange checklist code formatpainter  table",image_title:!0,height:300,file_picker_types:"image",automatic_uploads:!1,relative_urls:!1,convert_urls:!1,images_upload_handler:function(t,a,o){e.upload_handler(t,a,o)},file_picker_callback:function(t,a,o){e.loadFile(t,a,o)},images_dataimg_filter:function(e){return e.hasAttribute("internal-blob")}}},model:{value:e.project.about,callback:function(t){e.$set(e.project,"about",t)},expression:"project.about"}})],1),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"cover"}},[e._v("Cover Image")]),e._v(" "),a("label",{staticClass:"custom-file"},[a("img",{attrs:{src:e.placeholder,height:"100",alt:""}}),e._v(" "),a("input",{staticClass:"custom-file-input",attrs:{type:"file",name:"cover",id:"cover","aria-describedby":"fileHelpId"},on:{change:function(t){return e.handleFileChange(t)}}}),e._v(" "),a("div",{staticClass:"progress-bar progress-bar-striped active",style:{width:e.progress},attrs:{role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"}},[e._v(e._s(e.progress))])])]),e._v(" "),e._m(0)])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-group"},[t("button",{staticClass:"button-green",attrs:{type:"submit"}},[this._v("Create")])])}],!1,null,"35dfbfe2",null);t.default=s.exports},Ltig:function(e,t,a){"use strict";var o=a("4bQI");a.n(o).a},PCe0:function(e,t,a){"use strict";a.r(t);var o=a("ynI1"),r=a("HsP9"),s={data:function(){return{url:"",type:this.$route.params.type,post:{subject:"",author:"",category:"selected",featured:!1,coverImage:"",content:""},spin:!1,categories:[],placeholder:"/images/placeholder.png",filesSelectedLength:null,progress:null,uploadedFileUrl:"",cloudinary:{uploadPreset:"knkccgjv",apiKey:"634813511968181",cloudName:"bizguruh-com"}}},components:{"app-editor":o.a,Upload:r.a},mounted:function(){this.getCategories()},methods:{getUploadDetails:function(e,t){this.url=t.secure_url},getCategories:function(){var e=this;axios.get("/api/news-categories").then((function(t){e.categories=t.data}))},submit:function(){var e=this;this.spin=!0,"news"==this.type?axios.post("/api/create-news",this.post).then((function(t){201==t.status&&(e.$toasted.success("Created successfully"),e.$router.push("/admin/news"),e.spin=!1)})).catch((function(t){e.spin=!1})):axios.post("/api/create-announcement",this.post).then((function(t){201==t.status&&(e.$toasted.success("Created successfully"),e.$router.push("/admin/news"),e.spin=!1)})).catch((function(t){e.spin=!1}))},draft:function(){var e=this;"news"==this.type&&axios.post("/api/save-draft",this.post).then((function(t){200==t.status&&e.$toasted.info("Saved to draft")}))},handleFileChange:function(e){var t=e.target.files[0];this.loadCoverFile(t)},loadCoverFile:function(e){var t=this,a=new FileReader;a.onload=function(e){t.placeholder=e.target.result},a.readAsDataURL(e),this.processUpload(e)},processUpload:function(e){var t=this,a=this;this.start=!0;var o=new FormData,r=new XMLHttpRequest,s=this.cloudinary.cloudName,i=this.cloudinary.uploadPreset;o.append("file",e),o.append("resource_type","auto"),o.append("upload_preset",i),r.open("POST","https://api.cloudinary.com/v1_1/"+s+"/upload"),r.upload.onprogress=function(e){e.lengthComputable&&(a.progress=Math.round(e.loaded/e.total*100)+"%")},r.upload.onloadstart=function(e){this.progress="Starting..."},r.upload.onloadend=function(e){this.progress="Completing.."},r.onload=function(e){if(200===r.status){t.progress="Completed",setTimeout((function(){t.start=!1}),1e3);var a=JSON.parse(r.response);t.uploadedFileUrl=a.secure_url,t.post.coverImage=a.secure_url}else t.start=!1,alert("Upload failed. Please try again.")},r.send(o)},upload_handler:function(e,t,a){var o,r;(o=new XMLHttpRequest).withCredentials=!1,o.open("POST","/api/image-upload"),o.onload=function(){var e;200==o.status?(e=JSON.parse(o.responseText))&&"string"==typeof e.location?t(e.location):a("Invalid JSON: "+o.responseText):a("HTTP Error: "+o.status)},(r=new FormData).append("file",e.blob()),o.send(r)},loadFile:function(e,t,a){var o=document.createElement("input");o.setAttribute("type","file"),o.setAttribute("accept","image/*"),o.onchange=function(){var t=this.files[0],a=new FileReader;a.readAsDataURL(t),a.onload=function(){var o="blobid"+(new Date).getTime(),r=tinymce.activeEditor.editorUpload.blobCache,s=a.result.split(",")[1],i=r.create(o,t,s);r.add(i),e(i.blobUri(),{title:t.name})}},o.click()}}},i=(a("Ltig"),a("KHd+")),n=Object(i.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"form"}},[a("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[a("legend",[e._v("Create new "+e._s(e.type))]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[e._v("Subject")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.post.subject,expression:"post.subject"}],staticClass:"form-control",attrs:{type:"text",name:"title",id:"title","aria-describedby":"helpId",placeholder:"Enter title"},domProps:{value:e.post.subject},on:{input:function(t){t.target.composing||e.$set(e.post,"subject",t.target.value)}}})]),e._v(" "),"news"==e.type?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[e._v("Author")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.post.author,expression:"post.author"}],staticClass:"form-control",attrs:{type:"text",name:"author",id:"author","aria-describedby":"helpId",placeholder:"Enter author name"},domProps:{value:e.post.author},on:{input:function(t){t.target.composing||e.$set(e.post,"author",t.target.value)}}})]):e._e(),e._v(" "),"news"==e.type?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}}),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.post.category,expression:"post.category"}],staticClass:"custom-select",attrs:{name:"category",id:"category"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.post,"category",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"selected",disabled:""}},[e._v("Select category")]),e._v(" "),e._l(e.categories,(function(t,o){return a("option",{key:o,domProps:{value:t.category}},[e._v(e._s(t.category))])}))],2)]):e._e(),e._v(" "),a("b-form-row",[a("b-col",[a("b-form-group",[a("strong",[e._v("Generate download link")]),e._v(" "),a("Upload",{on:{getUploadDetails:e.getUploadDetails}}),e._v(" "),a("p",[e._v("Download link: "+e._s(e.url))])],1)],1)],1),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[e._v("Content")]),e._v(" "),a("app-editor",{staticClass:"form-control",attrs:{apiKey:"a0iyq87xxk4jqc1rf2kj55kr8pu9pol61qt32jccfldibgd7",init:{selector:"textarea",toolbar_mode:"floating",plugins:"advlist autolink lists link image imagetools charmap print preview anchor insertdatetime media table paste code help wordcount  autolink lists media    table  ",toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat |image help | a11ycheck addcomment showcomments casechange checklist code formatpainter  table",image_title:!0,height:300,file_picker_types:"image",automatic_uploads:!1,relative_urls:!1,convert_urls:!1,images_upload_handler:function(t,a,o){e.upload_handler(t,a,o)},file_picker_callback:function(t,a,o){e.loadFile(t,a,o)},images_dataimg_filter:function(e){return e.hasAttribute("internal-blob")}}},model:{value:e.post.content,callback:function(t){e.$set(e.post,"content",t)},expression:"post.content"}})],1),e._v(" "),"news"==e.type?a("div",{staticClass:"form-group"},[a("label",{staticClass:"custom-control custom-checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.post.featured,expression:"post.featured"}],staticClass:"custom-control-input",attrs:{type:"checkbox",name:"feautured",id:"featured"},domProps:{checked:Array.isArray(e.post.featured)?e._i(e.post.featured,null)>-1:e.post.featured},on:{change:function(t){var a=e.post.featured,o=t.target,r=!!o.checked;if(Array.isArray(a)){var s=e._i(a,null);o.checked?s<0&&e.$set(e.post,"featured",a.concat([null])):s>-1&&e.$set(e.post,"featured",a.slice(0,s).concat(a.slice(s+1)))}else e.$set(e.post,"featured",r)}}}),e._v(" "),a("span",{staticClass:"custom-control-indicator"},[e._v("Featured")])])]):e._e(),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"cover"}},[e._v("Cover Image")]),e._v(" "),a("label",{staticClass:"custom-file"},[a("img",{attrs:{src:e.placeholder,height:"100",alt:""}}),e._v(" "),a("input",{staticClass:"custom-file-input",attrs:{type:"file",name:"cover",id:"cover","aria-describedby":"fileHelpId"},on:{change:function(t){return e.handleFileChange(t)}}}),e._v(" "),a("div",{staticClass:"progress-bar progress-bar-striped active w-25",style:{width:e.progress},attrs:{role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"}},[e._v(e._s(e.progress))])])]),e._v(" "),a("div",{staticClass:"form-group"},["news"==e.type?a("button",{staticClass:"button-dark mr-4",attrs:{type:"button"},on:{click:e.draft}},[e._v("Save to Draft")]):e._e(),e._v(" "),a("button",{staticClass:"button-green",attrs:{type:"submit"}},[e._v("Create "),e.spin?a("b-spinner",{attrs:{small:""}}):e._e()],1)])],1)])}),[],!1,null,"6f9ddb0f",null);t.default=n.exports},PFQc:function(e,t,a){"use strict";var o=a("Q/q1");a.n(o).a},"Q/q1":function(e,t,a){var o=a("gOLL");"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(o,r);o.locals&&(e.exports=o.locals)},U5Co:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,"\n#form[data-v-3e75ae10] {\n  padding: 20px;\n}\n.custom-control-input[data-v-3e75ae10] {\n  opacity: 1;\n  z-index: 0;\n}\n.progress[data-v-3e75ae10] {\n  height: 20px;\n}\n",""])},VpKQ:function(e,t,a){"use strict";var o=a("XJrR");a.n(o).a},X8SC:function(e,t,a){"use strict";a.r(t);var o={data:function(){return{type:this.$route.params.type,program:{name:"",cover_mage:"",about:""},placeholder:"/images/placeholder.png",filesSelectedLength:null,progress:null,uploadedFileUrl:"",cloudinary:{uploadPreset:"knkccgjv",apiKey:"634813511968181",cloudName:"bizguruh-com"}}},components:{"app-editor":a("ynI1").a},mounted:function(){},methods:{submit:function(){var e=this;axios.post("/api/create-program",this.program).then((function(t){201==t.status&&(e.$toasted.info("Created successfully"),e.program={name:"",cover_mage:"",about:""})}))},handleFileChange:function(e){var t=e.target.files[0];this.loadCoverFile(t)},loadCoverFile:function(e){var t=this,a=new FileReader;a.onload=function(e){t.placeholder=e.target.result},a.readAsDataURL(e),this.processUpload(e)},processUpload:function(e){var t=this,a=this;this.start=!0;var o=new FormData,r=new XMLHttpRequest,s=this.cloudinary.cloudName,i=this.cloudinary.uploadPreset;o.append("file",e),o.append("resource_type","auto"),o.append("upload_preset",i),r.open("POST","https://api.cloudinary.com/v1_1/"+s+"/upload"),r.upload.onprogress=function(e){e.lengthComputable&&(a.progress=Math.round(e.loaded/e.total*100)+"%")},r.upload.onloadstart=function(e){this.progress="Starting..."},r.upload.onloadend=function(e){this.progress="Completing.."},r.onload=function(e){if(200===r.status){t.progress="Completed",setTimeout((function(){t.start=!1}),1e3);var a=JSON.parse(r.response);t.uploadedFileUrl=a.secure_url,t.program.cover_image=a.secure_url}else t.start=!1,alert("Upload failed. Please try again.")},r.send(o)},upload_handler:function(e,t,a){var o,r;(o=new XMLHttpRequest).withCredentials=!1,o.open("POST","/api/image-upload"),o.onload=function(){var e;200==o.status?(e=JSON.parse(o.responseText))&&"string"==typeof e.location?t(e.location):a("Invalid JSON: "+o.responseText):a("HTTP Error: "+o.status)},(r=new FormData).append("file",e.blob()),o.send(r)},loadFile:function(e,t,a){var o=document.createElement("input");o.setAttribute("type","file"),o.setAttribute("accept","image/*"),o.onchange=function(){var t=this.files[0],a=new FileReader;a.readAsDataURL(t),a.onload=function(){var o="blobid"+(new Date).getTime(),r=tinymce.activeEditor.editorUpload.blobCache,s=a.result.split(",")[1],i=r.create(o,t,s);r.add(i),e(i.blobUri(),{title:t.name})}},o.click()}}},r=(a("VpKQ"),a("KHd+")),s=Object(r.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"form"}},[a("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[a("legend",[e._v("Create new "+e._s(e.type))]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[e._v("Program name")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.program.name,expression:"program.name"}],staticClass:"form-control",attrs:{type:"text",name:"title",id:"title","aria-describedby":"helpId",placeholder:"Enter title"},domProps:{value:e.program.name},on:{input:function(t){t.target.composing||e.$set(e.program,"name",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[e._v("About")]),e._v(" "),a("app-editor",{staticClass:"form-control",attrs:{apiKey:"a0iyq87xxk4jqc1rf2kj55kr8pu9pol61qt32jccfldibgd7",init:{selector:"textarea",toolbar_mode:"floating",plugins:"advlist autolink lists link image imagetools charmap print preview anchor insertdatetime media table paste code help wordcount a11ychecker advcode  formatpainter linkchecker autolink lists media mediaembed   table  tinymcespellchecker",toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat |image help | a11ycheck addcomment showcomments casechange checklist code formatpainter  table",image_title:!0,height:300,file_picker_types:"image",automatic_uploads:!1,relative_urls:!1,convert_urls:!1,images_upload_handler:function(t,a,o){e.upload_handler(t,a,o)},file_picker_callback:function(t,a,o){e.loadFile(t,a,o)},images_dataimg_filter:function(e){return e.hasAttribute("internal-blob")}}},model:{value:e.program.about,callback:function(t){e.$set(e.program,"about",t)},expression:"program.about"}})],1),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"cover"}},[e._v("Cover Image")]),e._v(" "),a("label",{staticClass:"custom-file"},[a("img",{attrs:{src:e.placeholder,height:"100",alt:""}}),e._v(" "),a("input",{staticClass:"custom-file-input",attrs:{type:"file",name:"cover",id:"cover","aria-describedby":"fileHelpId"},on:{change:function(t){return e.handleFileChange(t)}}}),e._v(" "),a("div",{staticClass:"progress-bar progress-bar-striped active",style:{width:e.progress},attrs:{role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"}},[e._v(e._s(e.progress))])])]),e._v(" "),e._m(0)])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-group"},[t("button",{staticClass:"button-green",attrs:{type:"submit"}},[this._v("Create")])])}],!1,null,"3e75ae10",null);t.default=s.exports},XJrR:function(e,t,a){var o=a("U5Co");"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(o,r);o.locals&&(e.exports=o.locals)},gOLL:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,"\n#form[data-v-35dfbfe2] {\n  padding: 20px;\n}\n.custom-control-input[data-v-35dfbfe2] {\n  opacity: 1;\n  z-index: 0;\n}\n.progress[data-v-35dfbfe2] {\n  height: 20px;\n}\n",""])},iWqz:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,"\n#form[data-v-6f9ddb0f] {\n  padding: 20px;\n}\n.custom-control-input[data-v-6f9ddb0f] {\n  opacity: 1;\n  z-index: 0;\n}\n.progress[data-v-6f9ddb0f] {\n  height: 20px;\n}\n",""])}}]);